---
title: Valentine's Day Contest Editorial (xorsplit, motest)
description: Valentine's Day Contest on codebreaker.xyz
date: 24/2/2023
---

# Preface

_For those people who had no better thing to do on February the 14th_

![](data:image/jpeg;base64,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)

AC count: <br />
xorsplit: 2, including 2 authors <br />
motest: 15, including author

# xorsplit

## Abridged problem statement

The score of a group is defined as the XOR of all of its elements. You start with an empty list, and are
to handle Q updates. At every update, one of two things will happen:

* 0 X: Add the number X to your list.
* 1 X: Delete the number X from your list. It is guaranteed that X had been previously added.
* 
After every update, split the integers into 2 groups such that the sum of the scores of the groups is
maximised. Output this after every update.

## Problem inspiration

This problem was initially intended to be for ECÂ³'s CP training final contest. 
However, we only found that the problem was EE after being unable to solve it and asking pavement, who gave a 
$\frac{N log^3{A}}{64}$ solution. After consulting zane and maomao90, we figured out a $N log(A)$ solution, allowing
maomao90 to buff the problem.

## Simplified problem

Let's try to solve the problem at a single time unit. Note that for each bit, there are 2 cases:

* The bit appears an odd number of times, and will always contribute its value to the final score.
* The bit appears an even number of times, and will contribute either twice of its value or nothing to the final score.

After processing the first type of bits, we are left with N numbers, each bit appearing an even number of times, trying to find a selection of numbers that maximises
the sum of the bits that can contribute twice. Note how the XOR of all of these new numbers is 0. Hence, the problem is reduced to finding the maximum subset XOR
of N numbers, which can be solved in $N log{A}$ using xor basis.

## Final solution

Note how we can consider the operation that does the simplified problem as a data structure. We can implement additions and deletions with an additional log factor
using DnC. This method is very classic and is left as a problem for the reader.

Time complexity: $Q log{Q}(log{Q} + log{X})$
